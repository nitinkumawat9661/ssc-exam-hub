<!DOCTYPE html>
<html lang="en">
<head>
    <title>Admin Panel</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light p-3">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h3 class="mb-0">âš™ï¸ Admin</h3>
        <a href="/dashboard" class="btn btn-secondary btn-sm">Back</a>
    </div>

    <div class="row g-3">
        <!-- SETTINGS -->
        <div class="col-md-6">
            <div class="card shadow-sm p-3 h-100">
                <h5 class="text-primary border-bottom pb-2">ğŸ”§ Settings</h5>
                <form method="POST">
                    <input type="hidden" name="update_settings" value="true">
                    
                    <label class="small fw-bold">Notice Board</label>
                    <input type="text" name="notice_text" value="{{ settings.notice_text }}" class="form-control mb-2">

                    <label class="small fw-bold">UPI ID</label>
                    <input type="text" name="upi_id" value="{{ settings.upi_id }}" class="form-control mb-2">
                    
                    <label class="small fw-bold">UPI Name</label>
                    <input type="text" name="upi_name" value="{{ settings.upi_name }}" class="form-control mb-2">

                    <hr>
                    <label class="small fw-bold text-danger">ğŸ“º Ad Control</label>
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" name="ads_enabled" {% if settings.ads_enabled %}checked{% endif %}>
                        <label class="form-check-label">Enable Ads</label>
                    </div>
                    <label class="small mt-2">Reward per Ad (Coins)</label>
                    <input type="number" name="ad_reward" value="{{ settings.ad_reward }}" class="form-control mb-2">
                    
                    <button type="submit" class="btn btn-primary w-100 mt-2">Save âœ…</button>
                </form>
            </div>
        </div>

        <!-- UPLOAD -->
        <div class="col-md-6">
            <div class="card shadow-sm p-3 h-100">
                <h5 class="text-success border-bottom pb-2">ğŸ“„ Uploads</h5>
                <form method="POST" enctype="multipart/form-data">
                    <input type="text" name="paper_title" class="form-control mb-2" placeholder="Title" required>
                    <input type="number" name="price" class="form-control mb-2" placeholder="Price" value="50">
                    <input type="file" name="file" class="form-control mb-2" required>
                    <button type="submit" class="btn btn-success w-100">Upload PDF</button>
                </form>
                <hr>
                <h6 class="text-info">ğŸ“ Add Flashcard</h6>
                <form method="POST">
                    <input type="text" name="fc_q" class="form-control mb-1" placeholder="Question" required>
                    <input type="text" name="fc_a" class="form-control mb-1" placeholder="Answer" required>
                    <button type="submit" class="btn btn-info w-100 text-white">Add Card</button>
                </form>
            </div>
        </div>
    </div>

    <!-- PAYMENTS -->
    <div class="card shadow-sm mt-4 p-3">
        <h5 class="text-warning">ğŸ’¸ Pending Payments</h5>
        {% if payments %}
        <div class="table-responsive">
            <table class="table table-bordered mt-2">
                <thead class="table-dark"><tr><th>User</th><th>Amount</th><th>UTR</th><th>Action</th></tr></thead>
                <tbody>
                    {% for pay in payments %}
                    <tr>
                        <td>{{ pay.user_name }}</td>
                        <td class="fw-bold">â‚¹{{ pay.amount }}</td>
                        <td><small>{{ pay.utr }}</small></td>
                        <td>
                            <a href="/approve_payment/{{ pay.id }}" class="btn btn-success btn-sm">Approve</a>
                            <a href="/reject_payment/{{ pay.id }}" class="btn btn-danger btn-sm">Reject</a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        {% else %}
        <p class="text-muted">No pending requests.</p>
        {% endif %}
    </div>
</body>
</html>
